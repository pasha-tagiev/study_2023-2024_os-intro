---
## Front matter
title: "Отчёт по лабораторной работе №1"
subtitle: "Установка и настройка ОС Fedora на VirtualBox"
author: "Тагиев Павел Фаикович"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: false # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	  - spelling=modern
	  - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Целью данной работы является приобретение практических навыков установки операционной системы на виртуальную машину, настройки 
минимально необходимых для дальнейшей работы сервисов.

# Задание

1. Настроить VirtualBox
2. Установить ОС Fedora
3. Выполнить настройку системы
4. Установить необходимые для создания отчетов пакеты
5. Выполнить домашнее задание

# Теоретическое введение

***Виртуальная машина*** - программа, эмулирующая аппаратное обеспечение компьютера и исполняющая программы для гостевой платформы
на хост платформе.

***Операционная система*** — программное обеспечение, управляющее компьютерами (включая микроконтроллеры) и позволяющее запускать на них прикладные программы. Предоставляет программный интерфейс для взаимодействия с компьютером, управляет прикладными программами и занимается распределением предоставляемых ресурсов, в том числе между прикладными программами [@tanenbaum_book_modern-os_ru].

# Выполнение лабораторной работы

## Конфигурация виртуальной машины

Запустим VirtualBox. Мы увидим окно менеджера виртуальных машин (рис. [-@fig:001]).
Нажмем кнопку создать. 

![Менеджер VirtualBox](image/1.png){#fig:001}

В появившемся окне (рис. [-@fig:002]) укажем имя и папку в 
соответствии с соглашением об именовании, также укажем путь к образу ОС.
Зададим максимально возможный объем оперативной памяти и количест ядер процессора (рис. [-@fig:003]).
Укажем размер диска (рис. [-@fig:004]).

![Создание виртуальной машины](image/2.png){#fig:002}

![Оперативная память и количество ядер процессора](image/3.png){#fig:003}

![Объем диска](image/4.png){#fig:004}

Итоговую, на данный момент, конфигурацию системы можно увидеть ниже (рис. [-@fig:005]).

![Конфигурация системы](image/5.png){#fig:005}

Дополнительно включим двунаправленный буфер обмена и увеличим объем видео памяти (рис. [-@fig:006;-@fig:007]).

![Включение двунаправленного буфера](image/6.png){#fig:006}

![Увеличение объема видео памяти](image/7.png){#fig:007}

## Установка ОС Fedora

Запустим созданную ранее виртуальную машину. Нас встретит меню загрузчика GRUB.
Из предложенных вариантов выберем **Start Fedora-Workstation-Live 39** (рис. [-@fig:008]).

![Меню загрузчика GRUB](image/8.png){#fig:008}

После загрузки системы появится окно с предложением установки ОС Fedora (рис. [-@fig:009]), нажмем
на кнопку **Install Fedora**.

![Предложение установки ОС](image/9.png){#fig:009}

Выбираем язык установки (рис. [-@fig:010]) и диск на который будет установлена ОС (рис. [-@fig:011]). 
После кликаем на кнопку **Начать установку**.

![Язык установки](image/10.png){#fig:010}

![Диск установки](image/11.png){#fig:011}

После окончания установки ОС выключаем виртуальную машину и изымаем ISO диск из привода (рис. [-@fig:012]).
Вновь запускаем систему.

![Изъятие диска из привода](image/12.png){#fig:012}

После запуска нас будет ждать приветсвенное окно, с предложением
проделать финальную настройку (рис. [-@fig:013]). Нажмем на кнопку **Начать настройку**.

![Приветсвенное окно](image/13.png){#fig:013}

Оставим службы определения местоположения и автоматические отчеты о проблемах включенными (рис. [-@fig:014]).
Не будем добавлять сторонние репозитории (рис. [-@fig:015]). Пропустим подключение сетевых учетных записей (рис. [-@fig:016]).

![Местоположение и отчеты о проблемах](image/14.png){#fig:014}

![Сторонние репозитории](image/15.png){#fig:015}

![Сетевые учетные записи](image/16.png){#fig:016}

Укажем полное имя и имя пользователя (рис. [-@fig:017]), зададим пароль (рис. [-@fig:018]). 
Настройка в этой программе завершена (рис. [-@fig:019]).

![Имя пользователя](image/17.png){#fig:017}

![Задание пароля](image/18.png){#fig:018}

![Финальное сообщение](image/19.png){#fig:019}

Но при настройке через эту программу нас не спросили имя хоста. 
Зайдем в настройки системы во вкладку "О системе" (рис. [-@fig:020]). И зададим имя хоста в
соответствии с соглашением об именовании.

![Задание имени хоста](image/20.png){#fig:020}

## Установка пакетов и автоматическое обновление

Запустим терминал, перейдем в режим суперпользователя введя команду `sudo -i`{.bash}, обновим пакеты используя
команду `dnf update`{.bash} (рис. [-@fig:021]). Для более комфортной работы в терминале установим tmux и mc,
используя команду `dnf install tmux mc`{.bash} (рис. [-@fig:024]).

![Обновление пакетов](image/21.png){#fig:021}

![Установка tmux и mc](image/24.png){#fig:024}

Включим автоматическое обновление. Для этого установим необходимый пакет 
командой `dnf install dnf-automatic`{.bash} (рис. [-@fig:025]). Конфигурацию можно задать в файле
`/etc/dnf/automatic.conf`{.bash}. После запустим таймер командой 
`systemctl enable --now dnf-automatic.timer`{.bash} (рис.[-@fig:026]).

![Установка dnf-automatic](image/25.png){#fig:025}

![Установка таймера](image/26.png){#fig:026}

## Отключение SELinux

Запустим установленный ранее Midnight Commander введя в терминале `mc`{.bash} (рис. [-@fig:027]). 
Перейдем в каталог `/etc/selinux/`{.bash} откроем файл `config`{.bash}. Изменим значение
константы `SELINUX`{.bash} с `enforcing`{.bash} на `permissive`{.bash} (рис. [-@fig:028]).
Выйдя из Midnight Commander перезапустим машину введя команду `reboot`{.bash}.

![Интерфейс Midnight Commander](image/27.png){#fig:027}

![Изменение константы](image/28.png){#fig:028}

## Установка dkms и дополнений гостевой ОС

После перезагрузки системы снова откроем терминал, запустим терминальный мультиплексор
командой `tmux`{.bash}. Снова перейдем в режим суперпользователя и установим `dkms`{.bash} (рис. [-@fig:030]).

![Установка dkms](image/30.png){#fig:030}

После установки подключим *образ диска Дополнений гостевой ОС* (рис. [-@fig:031]). Монтируем подключенный диск
командой `mount /dev/sr0 /media`{.bash}. Запускаем установщик `/media/VBoxLinuxAdditions.run`{.bash} (рис. [-@fig:032]).
После установки перезагрузим систему.

![Подключение диска с дополнениями](image/31.png){#fig:031}

![Запуск установщика](image/32.png){#fig:032}

## Установка программного обеспечения для создания документации

Установим пакеты `pandoc` и `texlive` (рис. [-@fig:033;-@fig:034;-@fig:035]).

![Установка pandoc](image/33.png){#fig:033}

![Установка texlive](image/34.png){#fig:034}

![Конец установки texlive](image/35.png){#fig:035}

Установим пакет `pandoc-crossref`{.bash}. Для этого узнаем установленную версию пакета `pandoc`{.bash}
введя команду `pandoc --version`{.bash} (рис. [-@fig:036]) Найдем подходящую версию `pandoc`{.bash}
[в github репозитории (это ссылка)](https://github.com/lierdakil/pandoc-crossref/releases) (рис. [-@fig:037]).
Скачем архив введя команду `wget <адрес>`{.bash} (рис. [-@fig:036]). 
Распакуем архив в директорию `/usr/local/bin`{.bash} и добавим права 
на исполнение (рис. [-@fig:038]).

![Загрузка архива](image/36.png){#fig:036}

![Нужная версия pandoc-crossref](image/37.png){#fig:037}

![Установка pandoc-crossref](image/38.png){#fig:038}

Также для шаблона лабораторных работ нам понадобятся некоторые шрифты (рис. [-@fig:041]).
Установим их просто переместив в папку `/usr/share/fonts`{.bash}.
Все готово для генерации документов по шаблону лабораторных работ.

![Необходимые шрифты](image/41.png){#fig:041}

# Выполнение домашнего задания

Команда `dmesg`{.bash} выводит логи загрузки системы, она должна вызываться с
правами супер пользователя. Первым делом в `dmesg`{.bash} попадают сообщения
о загрузке ядра ОС в память компьютера. А также сообщения о загрузке драйверов для
соответствующего оборудования [@wiki_dmesg]. Часть вывода `dmesg`{.bash} приведена на рис. [-@fig:044].

![Часть вывода dmesg](image/44.png){#fig:044}

Получим следующую информацию:

1. Версия ядра Linux
2. Частота процессора
3. Модель процессора
4. Объем доступной оперативной памяти
5. Тип обнаруженного гипервизора
6. Тип файловой системы корневого раздела
7. Последовательность монтирования файловых систем

Полученную для пунктов 1-6 инофрмацию можно увидеть на рис. [-@fig:042],
а для пункта 7 на рис. [-@fig:043].

![Домашнее задание пункты 1-6](image/42.png){#fig:042}

![Домашнее задание пункт 7](image/43.png){#fig:043}

# Ответы на контрольные вопросы

1. Какую информацию содержит учётная запись пользователя?  
Получить данные о пользователе можно используя команду  
`getent passwd <имя_пользователя>`{.bash}. В нашем случае вывод будет такой:  
`pftagiev:x:1000:1000:pftagiev:/home/pftagiev:/bin/bash`{.bash}, чтобы его разобрать 
воспользуемся командой `man 5 passwd`{.bash}, она откроет документацию по `passwd`{.bash} 
в секции 5 (*File Formats and Conventions*). Из него можно узнать, что информация о пользователях
хранится в файле `/etc/passwd`{.bash}. Каждая строка в нем представляет пользователя, а секции в строке
разделяются двоеточием. Всего имеется 7 секций, опишем каждую из них:
    1. name - это имя пользователя в системе, он не должен содержать заглавных букв.
    2. password - может содержать сам проль, звездочку (обычно означет отсутствие пароля), букву x  
    (пароль пользователя сохраняется в файле `/etc/shadow`{.bash}).
    3. UID - идентификатор пользователя, root имеет UID равный 0.
    4. GID - идентификатор группы пользователя.
    5. GECOS - иногда эту секцию называют полем комментариев, зачастую она просто содержит полное имя пользователя.
    6. directory - здесь записан путь до домашней папки пользователя.
    7. shell - командная оболочка, которая запускается при входе пользователя в систему (если shell не указана запускается  
    `/bin/sh`{.bash}).
2. Укажите команды терминала и приведите примеры.  
    * для получения справки по команде:  
    Для получения справки по команде можно воспользоваться командой `man`{.bash}.
    Например, чтобы получить справку по этой же команде на русском языке можно использовать
    `man --locale=ru man`{.bash}.
    * для перемещения по файловой системе:  
    Для перемещения по файловой системе используется команда `cd <путь>`{.bash}.
    Например, чтобы переместиться в домашнюю директорию текущего пользователя можно использовать
    `cd`{.bash} без аргументов или `cd ~`{.bash}.
    * для просмотра содержимого каталога:  
    Чтобы посмотреть содержимое каталогов используется команда `ls`{.bash}.
    Например чтобы посмотреть все файлы в текущем каталоге (в том числе скрытые)
    можно использовать `ls -al`{.bash}.
    * для определения объема каталога:  
    Для этой задачи подойдет команда `du`{.bash}.
    Для вывода размера текущего каталога можно использовать `du -sh`.
    * для создания/удаления каталогов/файлов:  
    Чтобы создать файл в системе Linux можно использовать команду  
    `: > <имя_файла>` или команду `touch <имя_файла>`.
    Чтобы удалить файл можно использовать команду `rm`{.bash}.
    Например, `rm <имя_файла>`
    Чтобы создать каталог можно использовать команду `mkdir`.
    Например, `mkdir -p ./work/study`{.bash} создаст каталог 
    `study`{.bash} и его родительский каталог `work`{.bash}.
    Чтобы удалить каталог можно использовать все ту же команду
    `rm`{.bash}, но добавив флаг `-r`{.bash} для рекурсивного удаления.
    Например, `rm -r ./work/`{.bash} удалит каталог `./work/`{.bash}
    и все вложенные в него каталоги и файлы.
    * для задания определенных прав на файл/каталог:  
    Чтобы изменить права доступа на файл или каталог используется команда 
    `chmod`{.bash}.
    Так например, команда `chmod u+x <имя_файла>`{.bash}, добавит возможность исполнения файла
    владельцом.
    * для просмотра истории команд:  
    Для просмтора истории команд используется `history`{.bash}.
    Например, `history 10`{.bash} выведет в терминал 10 последних команд.
3. Что такое файловая система? Приведите примеры с краткой характеристикой.  
Файловая система - это структура, используемая операционной системой для организации и управления файлами на устройстве
хранения. Она определяет правила хранения и организации данных на устройстве хранения а также доступа к ним [@kingston].
    * FAT - одна из старейших и простейших файловых систем. Первоначально она была разработана для MC-DOS и до сих  
    пор используется во многих съемных устройствах хранения. Однако в ней отсутствуют некторые функции, такие как права доступа и
    ведение журнала.
    * APFS - это файловая система разработанная компанией Apple для своих устройств. Она предназначена для оптимизации  
    производительности и совместимости с аппаратными и программным обеспечением Apple. APFS включает такие функции, как
    клонирование, шифрование на уровне файлов и улучшенную производительность на твердотельных накопителях.
    * Ext4 - Широко используемая файловая система в ОС Linux. Она является преемником Ext3 и предлагает несколько улучшений  
    с точки зрения производительности, масштабируемости и надеждности. Ext4 является файловой системой по умолчанию
    во многих дистрибутивах Linux.
4. Как посмотреть, какие файловые системы подмонтированы в ОС.  
Можно воспользоваться утилитой `findmnt`{.bash} с ключем `-l`{.bash}.
Она выведет таблицу в которой столбец **TARGET** будет отображать точку монтирования, **SOURCE** -
исходное устройство, в **FSTYPE** будет записан тип файловой системы, а в **OPTIONS** параметры.
5. Зависший процесс может быть удален командой `kill`{.bash} с флагом `-9`{.bash} или 
с флагом `-s`{.bash} и значением `KILL`{.bash}. Например, `kill -s KILL <id_процесса>`{.bash}.
Узнать id процесса можно выведя их список в терминал с помощью команды `ps aux`{.bash}. Также можно
передать этот список через пайп утилите `grep`{.bash}, чтобы разобрать его регулярным выражением и найти id нужного
процесса. Пример: `ps aux | grep -i "my_app"`{.bash}.

# Выводы

В данной лаборатороной работе была произведена установка и базовая настройка
ОС Fedora. Было выполнено домашнее задание - проанализирован вывод команды `dmesg`{.bash}.
Таким образом, мы получили общее представление об установке и настройке ОС на виртуальной машине,
а ответив на контрольные вопросы - закрепили полученные знания.

# Список литературы{.unnumbered}

::: {#refs}
:::
